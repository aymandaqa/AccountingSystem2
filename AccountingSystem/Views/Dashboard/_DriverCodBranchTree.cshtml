@model IReadOnlyList<AccountingSystem.ViewModels.DriverCodBranchSummaryViewModel>

@if (Model == null || !Model.Any())
{
    <div class="alert alert-info text-center mb-0">
        لا توجد بيانات متاحة لعرض تقرير تحصيل السائقين.
    </div>
}
else
{
    <div id="driverCodTree"
         class="tree-container driver-cod-tree"
         data-load-url="@Url.Action("LoadDriverCodBranchDetails", "Dashboard")">
        @foreach (var branch in Model)
        {
            <div class="tree-node level-0"
                 data-branch-id="@branch.BranchId"
                 data-has-children="true">
                <div class="tree-node-content">
                    <div class="tree-node-info">
                        <button class="toggle-btn" type="button">
                            <i class="fas fa-plus"></i>
                        </button>
                        <div class="tree-node-text">
                            <div class="node-title">@branch.BranchName</div>
                            <div class="node-subtitle text-muted small">إجمالي بيانات السائقين في الفرع</div>
                        </div>
                    </div>
                    <div class="tree-node-metrics text-end ms-auto">
                        <div class="metric">
                            <span class="metric-label">إجمالي الشحنات</span>
                            <span class="metric-value">@branch.ShipmentTotal.ToString("N2")</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">مبالغ الـ COD</span>
                            <span class="metric-value text-success">@branch.ShipmentCod.ToString("N2")</span>
                        </div>
                    </div>
                </div>
                <div class="tree-children" data-loaded="false" style="display:none;"></div>
            </div>
        }
    </div>
}
